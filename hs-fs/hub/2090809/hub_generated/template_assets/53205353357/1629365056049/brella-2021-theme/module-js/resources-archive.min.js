$((function(){if($(".archive-post-slider").length>0){var players=Plyr.setup(".post-item__plyr-video");new Swiper(".archive-post-slider",{loop:!1,slidesPerView:"1",autoHeight:!1,speed:800,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},pagination:{el:".swiper-pagination",type:"bullets",clickable:!0},on:{slideChange:function(){players.forEach((function(player){player.pause()}))}}})}var page=1,archivePosts=new List("archive-posts",{item:"empty-base-item",valueNames:["brlTitle",{name:"brlLink",attr:"href"},{name:"brlImage",attr:"src"},{name:"brlAlt",attr:"alt"},"brlDescription","brlTopics","brlType","topics","types","order","hideInAll"],page:12,pagination:!0},brellaAllPosts);function filterPosts(){var checkedTags=[],checkedTypes=[];$(".archive-filters--tags .archive-filter__input:checked").each((function(){var tagValue=$(this).val();tagValue&&checkedTags.push(tagValue)})),$(".archive-filters--types .archive-filter__input:checked").each((function(){var typeValue=$(this).val();typeValue&&checkedTypes.push(typeValue)})),checkedTags.length||checkedTypes.length?archivePosts.filter((function(item){var tagFound=!1,typeFound=!1;return checkedTags.length&&item.values().topics&&checkedTags.forEach((function(val){contains(item.values().topics,val)&&(tagFound=!0)})),checkedTypes.length&&item.values().types&&checkedTypes.forEach((function(val){contains(item.values().types,val)&&(typeFound=!0)})),!!(checkedTags.length&&tagFound&&!typeFound&&!checkedTypes.length||checkedTypes.length&&typeFound&&!tagFound&&!checkedTags.length||tagFound&&typeFound)})):(archivePosts.filter(),$(".resouce-index-main-content").hasClass()||archivePosts.filter((function(item){return"true"!=item.values().hideInAll})))}function searchPosts(value){value?archivePosts.search(value):archivePosts.search()}function contains(a,obj){for(var i=a.length;i--;)if(a[i]===obj)return!0;return!1}function updatedChecks(loadMore=!1){var matchingItems=archivePosts.matchingItems.length,visibleItems=archivePosts.visibleItems.length;loadMore||(page=1,archivePosts.show(0,12)),matchingItems==visibleItems?$(".load-more-posts").addClass("hidden"):$(".load-more-posts").removeClass("hidden"),0==matchingItems?$(".posts-not-found").prop("hidden",!1):$(".posts-not-found").prop("hidden",!0)}archivePosts.sort("order",{order:"desc"}),filterPosts(),searchPosts(),$(".archive-filter__input").on("change",(function(event){filterPosts(),updatedChecks(),$(".resouce-index-main-content").addClass("hide")})),$(".archive-filter-dropdown .archive-filter__input").on("change",(function(event){var text=$(this).next().text();$(".archive-selected-type").text(text),$(".archive-filters--types").removeClass("archive-dropdown-open")})),$(".archive-search__field").on("input",(function(e){var input=$(this),val=input.val();input.data("lastval")!=val&&(input.data("lastval",val),searchPosts(val),updatedChecks())})),$("body").on("click",(function(event){$(".archive-filters--types").removeClass("archive-dropdown-open")})),$(document).on("keydown",(function(event){"Escape"==event.key&&$(".archive-filters--types").removeClass("archive-dropdown-open")})),$(".archive-selected-type").on("click",(function(event){event.stopPropagation(),$(this).parents(".archive-filters--types").toggleClass("archive-dropdown-open")})),$(".archive-filter-dropdown").on("click",(function(event){event.stopPropagation()})),$(".load-more-posts").on("click",(function(event){event.preventDefault(),page++,archivePosts.show(0,12*page),updatedChecks(!0)}))}));
//# sourceURL=https://cdn2.hubspot.net/hub/2090809/hub_generated/template_assets/53205353357/1629365056049/brella-2021-theme/module-js/resources-archive.js